<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>clinFHIR</title>
  <script defer src="https://cloud.umami.is/script.js" data-website-id="383f5688-7293-4ac2-9dd3-b82e032bcc81"></script>
  <style>
    body {
      margin: 0;
      padding: 0;
      background: #f0f4f8;
      font-family: system-ui, sans-serif;
      display: flex;
      justify-content: center; /* center container */
      height: 100vh;
      box-sizing: border-box;
    }



    .help-icon {
      position: absolute;
      right: 10px;
      bottom: 10px;
      color: #777;       /* softer grey */
      opacity: 0.5;
    }

    .help-icon:hover {
      opacity: 1;
      color: #1e90ff;
    }


    /* Container with small side spacing */
    .container {
      display: flex;
      width: 95%;         /* container fills most of screen */
      max-width: 1400px;  /* cap for very wide screens */
      gap: 20px;
      height: 100%;
    }

    /* Left pane ~40% */
    .info-pane {
      flex: 2;
      min-width: 350px;
      background: #f5f5f5;
      padding: 20px;
      box-sizing: border-box;
      border-right: 1px solid #ccc;
      overflow-y: auto;

    }

    .myScroll {
        height: 600px;
        overflow-y: scroll;
    } 

    /* Right pane ~60% */
    .commands-pane {
      flex: 3;
      padding: 20px;
      box-sizing: border-box;
      display: flex;
      flex-direction: column;
      gap: 15px;
      overflow-y: auto;
    }

    /* Header with PNG */
    .commands-header {
      display: flex;
      justify-content: flex-end;
    }

    .commands-header img {
      height: 60px;
      width: auto;
    }

    /* Card grid */
    .command-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
      gap: 15px;
    }

    /* Cards */
    .card {
      border-radius: 14px;
      padding: 25px 20px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      cursor: pointer;
      transition: transform 0.25s ease, box-shadow 0.25s ease, background 0.25s ease;
      display: flex;
      flex-direction: column;
      align-items: flex-start;
      text-decoration: none;
      color: inherit;
      position: relative;       /* allow positioning inside card */
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0, 0, 0, 0.12);
    }

    .icon {
      font-size: 2.2rem;
      margin-bottom: 12px;
    }

    .card h2 {
      font-size: 1.2rem;
      margin: 0 0 8px;
      color: #1a202c;
    }

    .card p {
      font-size: 0.95rem;
      color: #555;
      margin: 0 0 8px 0;
    }

    .badge {
      display: inline-block;
      padding: 2px 8px;
      font-size: 0.75rem;
      font-weight: bold;
      border-radius: 8px;
      background: #ff6b6b;
      color: white;
    }

    /* Scrollbars */
    .info-pane::-webkit-scrollbar,
    .commands-pane::-webkit-scrollbar {
      width: 8px;
    }
    .info-pane::-webkit-scrollbar-thumb,
    .commands-pane::-webkit-scrollbar-thumb {
      background-color: rgba(0,0,0,0.2);
      border-radius: 4px;
    }

    .indent {
      margin-left: 8px;
    }
  </style>
</head>
<body>

  <div class="container">
    <!-- Left pane -->
    <div class="info-pane">



        <h2>clinFHIR</h2>
        <p>This dashboard provides quick access to the clinFHIR modules. Click on any card to open the corresponding module in a new tab.</p>


      <div class="myScroll">
        <h3>Patient Viewer</h3>
        <p class="indent">For the Clinician or Analyst, this module shows the Resources that comprise part of a Patient record, focusing on
          the connections between resources and displaying data in a familiar format. There are example records to view, or
          you can select a Patient from a FHIR server.

        </p>

        <h3>Bundle Visualizer</h3>
        <p class="indent">Aimed at the Implementor, this module will display the contents of FHIR Bundles. There are a number of visualization and validation options
          available to help you understand the structure and contents of the bundle.</p>
        <p class="indent">Bundles can be pasted in directly, pulled from a remote server or accessed from the library.</p>



      <h3>Graph Builder</h3>
      <p class="indent">The Graph Builder will allow you to build resource graphs that represent a scenario using Resources and References.
        Graphs generated by the tool can be saved to the Library and viewed in both Bundle Visualizer and Patient Viewer.


      <h3>Server Query</h3>
      <p class="indent">Query a FHIR server using a simple User Interface. You can search for resources using the FHIR search API,
        and view them in detail and as a graph.</p>

      <h3>Form Designer</h3>
      <p class="indent">Design and manage forms for data collection. This tool provides a user-friendly interface
         for creating forms that can be used in clinical and administrative settings.</p>

      <h3>Questionnaire Viewer</h3>
      <p class="indent">View questionnaires in tree format or rendered as a form. This tool allows you to easily navigate
         and understand the contents of FHIR Questionnaires, particularly with respect to the SDC Implementation Guide.</p>
<!--
      <h3>Questionnaire Response Viewer</h3>
      <p>View questionnaire responses in a table. The Questionnaire it was built from must be available.</p>
      -->
    </div>
          </div>



    <!-- Right pane -->
    <div class="commands-pane">
      <div class="commands-header">
        <img src="sb-intersystems.png" alt="Header" />
      </div>
      <div class="command-grid">
        <!-- Cards inserted by JS -->
      </div>
    </div>
  </div>

  <script>
    const colors = [
      "#D0E8F2", "#A7D8F5", "#A8E6CF", "#DFF7DF",
      "#E6F8D8", "#FFF3BF", "#FFE5D9", "#FFCCC9",
      "#FFD9E1", "#E3DFFF", "#D4C4F7", "#B8E0F4"
    ];

    //https://getemoji.com/#smileys

    const commands = [
      { title: "Patient Viewer", description: "Visualize patient data from Clinical perspective.",
        icon: "ðŸ‘³â€â™€ï¸", url: "/clinfhir/patientViewer.html", color: "#e0f7fa",
        helpUrl: "https://docs.google.com/document/d/1h6ndmfH8BCdVikkCaw3FBx0XXcl255DWcOEr08Ph7mQ/edit?tab=t.0" },

      { title: "Bundle Visualizer", description: "Display and Validate the contents of FHIR Bundles.",
        icon: "ðŸ“¦", url: "/clinfhir/bundleVisualizer.html", color: "#f3e5f5" },



      { title: "Graph Builder", description: "Create and visualize resource graphs.",
        icon: "ðŸ•¸ï¸", url: "/gb2/", color: "#fffde7" },

      { title: "Server Query", description: "Query a FHIR server",
        icon: "ðŸ—„ï¸", url: "/clinfhir/query.html", color: "#f1f8e9" },

      { title: "Form Designer", description: "Design and manage forms.",
        icon: "ðŸ§¾",  url: "/forms/models.html", color: "#fff3e0" },

      { title: "Questionnaire Viewer", description: "View questionnaires.",
        icon: "ðŸ“‹", url: "/forms/modelReview.html", color: "#fce4ec" }

     
    ];

    // { title: "QuestionnaireResponse Viewer", description: "View questionnaire responses.",
    //    icon: "ðŸ”", url: "/forms/qrVisualizerAdHoc.html", color: "#fce4ec", badge: "View only" }

    const grid = document.querySelector('.command-grid');

    commands.forEach((cmd, i) => {
      const card = document.createElement('a');
      card.href = cmd.url;
      card.target = "_blank";
      card.className = 'card';
      card.style.background = colors[i % colors.length];

      card.innerHTML = `
        <div class="icon">${cmd.icon}</div>
        <h2>${cmd.title}</h2>
        <p>${cmd.description}</p>
        ${cmd.badge ? `<span class="badge">${cmd.badge}</span>` : ''}

        ${cmd.helpUrl ? `
          <a class="help-icon"
             href="${cmd.helpUrl}"
             target="_blank"
             title="More information"
             onClick="umami.track('help_click', { module: '${cmd.title}' })">
            <svg viewBox="0 0 24 24" width="18" height="18" fill="currentColor">
              <path d="M12 2C6.49 2 2 6.04 2 11c0 2.38 1.02 4.53 2.72 6.18L4 22l4.14-2.17C9.1 20.61 10.52 21 12 21c5.51 0 10-4.04 10-9s-4.49-10-10-10zm1 15h-2v-2h2v2zm2.07-7.75-.9.92C13.45 11.9 13 12.5 13 14h-2v-.5c0-1 .45-1.75 1.17-2.47l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/>
            </svg>
          </a>
        ` : ''}

      `;


      /*
       card.innerHTML = `
         <div class="icon">${cmd.icon}</div>
         <h2>${cmd.title}</h2>
         <p>${cmd.description}</p>


         ${cmd.badgeX ? `<span class="badge">${cmd.badge}</span>` : ''}`;

 */
      grid.appendChild(card);
    });
  </script>

</body>
</html>
